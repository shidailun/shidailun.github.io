fetch('/data/words.json')
  .then(response => response.json())
  .then(wordToId => {
    // Extract word from URL (e.g., /word/Abura)
    const wordFromURL = window.location.pathname
      .split('/word/')[1]
      ?.replace(/\//g, ''); // Remove slashes

    // Case-insensitive match: compare lowercase versions
    const matchedEntry = Object.entries(wordToId).find(
      ([key]) => key.toLowerCase() === wordFromURL.toLowerCase()
    );

    if (matchedEntry) {
      const [matchedWord, id] = matchedEntry;
      window.location.replace(`https://e-dictionary.ilrdf.org.tw/sdq/terms/${id}.htm`);
    } else {
      document.body.innerHTML = `<h1>Word "${wordFromURL}" not found.</h1>`;
    }
  })
  .catch(error => {
    document.body.innerHTML = `<h1>Error loading word list.</h1>`;
    console.error(error);
  });
