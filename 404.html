fetch('/data/words.json')
  .then(response => response.json())
  .then(wordToId => {
    // Extract word from URL (e.g., /word/Abura)
    const wordFromURL = window.location.pathname
      .split('/word/')[1]
      ?.replace(/\//g, '')
      .toLowerCase(); // Convert to lowercase

    // Case-insensitive match: find the key in wordToId that matches (lowercase)
    const matchedWord = Object.keys(wordToId).find(
      key => key.toLowerCase() === wordFromURL
    );

    if (matchedWord) {
      window.location.replace(`https://e-dictionary.ilrdf.org.tw/sdq/terms/${wordToId[matchedWord]}.htm`);
    } else {
      document.body.innerHTML = `<h1>Word "${wordFromURL}" not found.</h1>`;
    }
  })
  .catch(error => {
    document.body.innerHTML = `<h1>Error loading word list.</h1>`;
    console.error(error);
  });
